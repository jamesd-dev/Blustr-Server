(this["webpackJsonpblustr-client"]=this["webpackJsonpblustr-client"]||[]).push([[0],{31:function(e,t,a){e.exports=a(69)},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(29),o=a.n(i),r=a(3),c=a(4),u=a(6),l=a(5),p=a(7),d=a.n(p),m=a(1),h={API_URL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_URL||"http://localhost:5000/api"},f=(a(53),a(18)),g=(a(54),a(55),a(56),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).getFirstImage=function(){return e.props.story.content.find((function(e){return/(http(s?):)/.test(e)}))},e.getFirstTextSection=function(){var t=e.props.story.content.find((function(e){return!/(http(s?):)/.test(e)}));return t&&(t=t.split(" ").slice(0,10).join(" ")),t},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.story;return s.a.createElement("div",{id:"story-card",className:5*Math.random()<1?"story-card card-wide":"story-card",onClick:function(){e.props.showStory(t)}},s.a.createElement("div",{id:"inner-story-card"},s.a.createElement("img",{id:"story-card-cover-image",src:this.getFirstImage(),alt:"story cover",onLoad:this.checkIfWide}),s.a.createElement("div",{id:"story-card-text-panel"},s.a.createElement("p",{id:"story-card-teaser"},this.getFirstTextSection(),"..."))))}}]),a}(n.Component)),v=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).handleScroll=function(){document.documentElement.scrollTop+window.innerHeight===document.documentElement.offsetHeight&&e.props.requestNextPage()},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll,!1)}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"browse-stories-panel"},this.props.stories.map((function(t,a){return s.a.createElement(g,{key:a,story:t,showStory:e.props.showStory})}))))}}]),a}(n.Component),y=(a(57),a(58),a(59),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={sections:[],type:{BLANK:"BLANK",OPTIONS:"OPTIONS",TEXT:"TEXT",IMAGE:"IMAGE"}},e.wrapValue=function(t){switch(t.type){case e.state.type.BLANK:return s.a.createElement("div",{className:"create-input-div",key:t.index},s.a.createElement("div",{id:"icon-div"},s.a.createElement("i",{className:"fas fa-plus create-icon",onClick:e.handleAdd,index:t.index,sectype:t.type})));case e.state.type.OPTIONS:return s.a.createElement("div",{className:"create-input-div",key:t.index},s.a.createElement("div",{id:"icon-div"},s.a.createElement("i",{className:"fas fa-edit create-icon",onClick:e.handleTextInput,index:t.index,sectype:t.type}),s.a.createElement("i",{className:"fas fa-image create-icon",onClick:e.handleImageInput,index:t.index,sectype:t.type})));case e.state.type.TEXT:return s.a.createElement("div",{className:"create-input-div",key:t.index},s.a.createElement("textarea",{name:"textInput",className:"create-textInput",onBlur:e.handleFocusOut,autoFocus:!0,onChange:e.updateValue,value:t.value,index:t.index,sectype:t.type}));case e.state.type.IMAGE:return t.showImage?s.a.createElement("div",{className:"create-input-div",id:"create-image-input-div",key:t.index},s.a.createElement("img",{src:t.value,name:"imageInput",className:"input-image",index:t.index,sectype:t.type,alt:"user inserted img",onClick:e.handleEditImage})):s.a.createElement("div",{className:"create-input-div",key:t.index},s.a.createElement("input",{type:"text",name:"imageInput",className:"create-imageInput",placeholder:"image url",autoFocus:!0,onChange:e.updateValue,value:t.value,index:t.index,sectype:t.type,onBlur:e.handleFocusOut}));default:return console.log("Unknown section type in CreateInput"),s.a.createElement("div",{className:"create-input-div",key:t.index})}},e.updateValue=function(t){var a=e.state.sections;a[t.target.getAttribute("index")].value=t.target.value,e.setState({sections:a})},e.handleFocusOut=function(t){""===t.target.value&&e.removeSection(t);var a="",n=e.state.sections;n[t.target.getAttribute("index")].type===e.state.type.IMAGE&&(n[t.target.getAttribute("index")].showImage=!0,e.setState({sections:n})),n.length>0&&(a=n[n.length-1].type),a!==e.state.type.BLANK&&a!==e.state.type.OPTIONS&&(n.push({type:e.state.type.BLANK,index:0,value:""}),e.setState({sections:n}),e.reindexSections())},e.removeSection=function(t){var a=e.state.sections.splice(t.target.getAttribute("index"),1);e.setState({sections:a}),e.reindexSections()},e.reindexSections=function(){var t=e.state.sections;t=t.map((function(e,t){return e.index=t,e})),e.setState({sections:t})},e.handleAdd=function(t){var a=e.state.sections;a[t.target.getAttribute("index")].type=e.state.type.OPTIONS,e.setState({sections:a})},e.handleTextInput=function(t){var a=e.state.sections;a[t.target.getAttribute("index")].type=e.state.type.TEXT,e.setState({sections:a})},e.handleEditImage=function(t){var a=e.state.sections;a[t.target.getAttribute("index")].type===e.state.type.IMAGE&&(a[t.target.getAttribute("index")].showImage=!1),e.setState({sections:a})},e.handleImageInput=function(t){var a=e.state.sections;a[t.target.getAttribute("index")].type=e.state.type.IMAGE,e.setState({sections:a})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({sections:[{type:this.state.type.BLANK,index:0,value:""}]})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,this.state.sections.map((function(t){return e.wrapValue(t)})))}}]),a}(n.Component));a(60),a(61);function b(e){return s.a.createElement("div",{className:"nav-icon"},s.a.createElement("i",{className:e.item.icon,onClick:e.item.click}),e.item.stat?s.a.createElement("p",{className:"nav-icon-stat"},e.item.stat):s.a.createElement(s.a.Fragment,null))}function E(e){return s.a.createElement("div",{id:"navbar"},e.items.map((function(e,t){return s.a.createElement(b,{item:e,key:t})})))}var S=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={defaultImages:["https://images.unsplash.com/photo-1514866546504-0c2bbda5f16d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60","https://images.unsplash.com/photo-1510191250627-6fdf443cfec4?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60","https://images.unsplash.com/photo-1554174532-48b37f80a254?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60","https://images.unsplash.com/photo-1530800633399-2d35227b35b2?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60","https://images.unsplash.com/photo-1512237260610-23782f4c1bfe?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60","https://images.unsplash.com/photo-1572989753782-accb88ad01f0?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=634&q=80"]},e.handleAccept=function(){var t=e.getFormContent(),a=t.find((function(e){return/(http(s?):)/.test(e)}));a||(a=e.state.defaultImages[Math.floor(Math.random()*e.state.defaultImages.length)],t.unshift(a)),d.a.post("".concat(h.API_URL,"/story/create"),{content:t},{withCredentials:!0}).then((function(){console.log("created post")})).catch((function(e){console.log("failed to create post"),console.log("error: ",e)})).finally((function(){e.returnToBrowse()}))},e.getFormContent=function(){var e=document.getElementById("form").childNodes,t=[].map.call(e,(function(e){return e.firstChild.value||e.firstChild.src}));return t=[].filter.call(t,(function(e){return e}))},e.returnToBrowse=function(){e.props.closeFocusPanel()},e}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{id:"form"},s.a.createElement(y,null),s.a.createElement(E,{items:[{text:"Accept",icon:"fas fa-check",click:this.handleAccept},{text:"Cancel",icon:"fas fa-times",click:this.returnToBrowse}]})))}}]),a}(n.Component),x=(a(62),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={isSignIn:!0},e.toggleAuthState=function(){e.setState({isSignIn:!e.state.isSignIn})},e.returnToBrowse=function(){e.props.closeFocusPanel()},e.getFormContent=function(){var e=document.getElementById("form").childNodes,t=[].map.call(e,(function(e){return e.firstChild.value}));return t=[].filter.call(t,(function(e){return e}))},e.handleAccept=function(){var t=e.getFormContent(),a=t[2],n=t[0],s=t[1],i=a?"signup":"signin";d.a.post("".concat(h.API_URL,"/").concat(i),{email:a,username:n,password:s},{withCredentials:!0}).then((function(t){console.log("Created user: ",t.data.username),e.props.updateUserData(t.data),e.returnToBrowse()})).catch((function(t){console.log("failed to create/login user"),console.log("err: ",t),e.returnToBrowse()}))},e}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("form",{id:"form"},this.state.isSignIn?s.a.createElement("h1",null,"Sign In"):s.a.createElement("h1",null,"Sign Up"),s.a.createElement("div",{className:"auth-input-div"},s.a.createElement("input",{type:"text",placeholder:"username",name:"username",id:"username-input"})),s.a.createElement("div",{className:"auth-input-div"},s.a.createElement("input",{type:"password",placeholder:"password",name:"password",id:"password-input"})),this.state.isSignIn?s.a.createElement("p",{className:"auth-link",onClick:this.toggleAuthState},"Sign Up?"):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"auth-input-div"},s.a.createElement("input",{type:"email",placeholder:"email",name:"email",id:"email-input"})),s.a.createElement("p",{className:"auth-link",onClick:this.toggleAuthState},"Sign In?")),s.a.createElement(E,{items:[{text:"Accept",icon:"fas fa-check",click:this.handleAccept},{text:"Cancel",icon:"fas fa-times",click:this.returnToBrowse}]}))}}]),a}(n.Component)),w=(a(63),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).returnToBrowse=function(){d.a.get("".concat(h.API_URL,"/story/").concat(e.props.story._id)).then((function(t){e.props.replaceStory(t),10*(t.data.likes+1)<t.data.dislikes&&d.a.delete("".concat(h.API_URL,"/story/").concat(e.props.story._id)).then((function(){e.props.removeStory(t.data),console.log("removed unpopular story")})).catch((function(){console.log("failed to remove unpopular story")}))})).catch((function(){console.log("failed to get story")})),e.props.closeFocusPanel()},e.getContent=function(){return e.props.story.content.map((function(e,t){return/(http(s?):)/.test(e)?s.a.createElement("img",{src:e,alt:"story",className:"story-image",key:t}):s.a.createElement("article",{className:"story-text",key:t},e)}))},e.like=function(){e.props.loggedInUser?d.a.patch("".concat(h.API_URL,"/story/").concat(e.props.story._id,"/like"),{},{withCredentials:!0}).then((function(){d.a.get("".concat(h.API_URL,"/user"),{withCredentials:!0}).then((function(t){e.cssLikeDislikeElement(t)})).catch((function(e){console.log("failed to obtain user data")}))})).catch((function(e){console.log(e)})):e.props.loadAuth()},e.dislike=function(){e.props.loggedInUser?d.a.patch("".concat(h.API_URL,"/story/").concat(e.props.story._id,"/dislike"),{},{withCredentials:!0}).then((function(){e.cssLikeDislikeElement()})).catch((function(e){console.log(e)})):e.props.loadAuth()},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.cssLikeDislikeElement()}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"view-card-content"},this.getContent()),s.a.createElement(E,{items:[{text:"Like",icon:"fas fa-thumbs-up",click:this.like},{text:"Dislike",icon:"fas fa-thumbs-down",click:this.dislike},{text:"Cancel",icon:"fas fa-times",click:this.returnToBrowse}]}))}},{key:"cssLikeDislikeElement",value:function(){var e=this;d.a.get("".concat(h.API_URL,"/user"),{withCredentials:!0}).then((function(t){var a=t.data.alteredStories.find((function(t){return t.storyId===e.props.story._id}));a.liked?document.getElementsByClassName("fa-thumbs-up")[0].classList.add("selected"):document.getElementsByClassName("fa-thumbs-up")[0].classList.remove("selected"),a.disliked?document.getElementsByClassName("fa-thumbs-down")[0].classList.add("selected"):document.getElementsByClassName("fa-thumbs-down")[0].classList.remove("selected")})).catch((function(e){console.log("failed to obtain user data")}))}}]),a}(n.Component)),I=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={panelState:"",loggedInUser:{}},e.getPanelComponent=function(){switch(e.state.panelState){case"create":return e.loadCreate();case"viewCard":return e.loadViewCard(e.props.story);case"auth":return e.loadAuth();default:return s.a.createElement(s.a.Fragment,null)}},e.setPanelState=function(t){e.setState({panelState:t})},e.loadCreate=function(){return e.state.loggedInUser?s.a.createElement(S,{closeFocusPanel:e.props.closeFocusPanel,refreshStories:e.props.refreshStories}):e.loadAuth()},e.loadViewCard=function(t){return s.a.createElement(w,{closeFocusPanel:e.props.closeFocusPanel,story:t,loadAuth:function(){e.setPanelState("auth")},loggedInUser:e.state.loggedInUser,replaceStory:e.props.replaceStory,removeStory:e.props.removeStory})},e.loadAuth=function(){return s.a.createElement(x,{closeFocusPanel:e.props.closeFocusPanel,updateUserData:e.updateUserData})},e.updateUserData=function(t){e.props.updateUserData(t),e.setState({loggedInUser:t})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){document.querySelector("body").classList.add("scroll-freeze"),this.setState({panelState:this.props.panelState,loggedInUser:this.props.loggedInUser})}},{key:"componentWillUnmount",value:function(){document.querySelector("body").classList.remove("scroll-freeze")}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"focus-panel"},s.a.createElement("div",{id:"inner-panel"},this.getPanelComponent())))}}]),a}(n.Component),k=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={stories:[],page:0,useFocusPanel:!1,focusPanelState:""},e.requestNextPage=function(){e.fetchPage(e.state.page),e.setState({page:e.state.page+1})},e.toggleUseFocusPanel=function(){e.setState({useFocusPanel:!e.state.useFocusPanel})},e.setUseFocusPanel=function(t){e.setState({useFocusPanel:t})},e.loadCreatePanel=function(){e.setState({useFocusPanel:!0,focusPanelState:s.a.createElement(I,{panelState:"create",closeFocusPanel:e.toggleUseFocusPanel,loggedInUser:e.props.loggedInUser,updateUserData:e.props.updateUserData,refreshStories:e.refreshStories})})},e.loadViewCardPanel=function(t){e.setState({useFocusPanel:!0,focusPanelState:s.a.createElement(I,{panelState:"viewCard",closeFocusPanel:e.toggleUseFocusPanel,loggedInUser:e.props.loggedInUser,updateUserData:e.props.updateUserData,refreshStories:e.refreshStories,replaceStory:e.replaceStory,removeStory:e.removeStory,story:t})})},e.replaceStory=function(t){var a=e.state.stories.map((function(e){return e._id===t._id?t:e}));e.setState({stories:a})},e.removeStory=function(t){var a=e.state.stories.filter((function(e){return e._id!==t._id}));e.setState({stories:a})},e.refreshStories=function(){e.setState({stories:[],page:0}),e.requestNextPage()},e.showStory=function(t){e.loadViewCardPanel(t)},e.seedEmptyDatabase=function(){if(0===e.state.stories.length)for(var t=0;t<100;t++){var a=["https://images.unsplash.com/photo-1514866546504-0c2bbda5f16d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60","https://images.unsplash.com/photo-1510191250627-6fdf443cfec4?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60","https://images.unsplash.com/photo-1554174532-48b37f80a254?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60","https://images.unsplash.com/photo-1530800633399-2d35227b35b2?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60","https://images.unsplash.com/photo-1512237260610-23782f4c1bfe?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60","https://images.unsplash.com/photo-1572989753782-accb88ad01f0?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=634&q=80","https://images.pexels.com/photos/730256/pexels-photo-730256.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500","https://images.pexels.com/photos/1366919/pexels-photo-1366919.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500","https://images.pexels.com/photos/799420/pexels-photo-799420.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500","https://images.pexels.com/photos/3792580/pexels-photo-3792580.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500","https://images.pexels.com/photos/2387877/pexels-photo-2387877.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500","https://images.pexels.com/photos/949592/pexels-photo-949592.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500","https://images.pexels.com/photos/2233416/pexels-photo-2233416.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500","https://images.pexels.com/photos/721287/pexels-photo-721287.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500","https://images.pexels.com/photos/730256/pexels-photo-730256.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500"],n=["Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Nisi porta lorem mollis aliquam ut. Urna duis convallis convallis tellus id interdum velit laoreet. Maecenas pharetra convallis posuere morbi leo urna molestie at elementum. Elementum eu facilisis sed odio. Placerat vestibulum lectus mauris ultrices eros in. Sem integer vitae justo eget magna fermentum. Malesuada fames ac turpis egestas sed tempus urna et. Diam in arcu cursus euismod quis viverra nibh. Pharetra pharetra massa massa ultricies mi. Ante in nibh mauris cursus mattis molestie a. Aliquam nulla facilisi cras fermentum odio eu. In nulla posuere sollicitudin aliquam ultrices.","At varius vel pharetra vel turpis nunc eget lorem. Lectus mauris ultrices eros in. Urna duis convallis convallis tellus id interdum velit. Leo in vitae turpis massa. Adipiscing tristique risus nec feugiat in fermentum posuere. Sit amet cursus sit amet dictum. Porta non pulvinar neque laoreet. Luctus venenatis lectus magna fringilla urna. In cursus turpis massa tincidunt dui ut. Amet venenatis urna cursus eget nunc scelerisque viverra. Tincidunt dui ut ornare lectus sit amet est placerat in. Rhoncus urna neque viverra justo nec ultrices dui. Auctor augue mauris augue neque gravida. Neque convallis a cras semper auctor neque vitae tempus quam.","Diam sollicitudin tempor id eu nisl nunc mi ipsum. Amet venenatis urna cursus eget. Turpis egestas integer eget aliquet nibh praesent. Tortor pretium viverra suspendisse potenti nullam ac. Egestas congue quisque egestas diam in arcu cursus. Suspendisse interdum consectetur libero id faucibus nisl tincidunt. Integer feugiat scelerisque varius morbi. Tellus elementum sagittis vitae et leo duis ut diam quam. Dolor sit amet consectetur adipiscing. Lectus arcu bibendum at varius vel pharetra. Dui id ornare arcu odio. Sed vulputate mi sit amet mauris commodo quis. Dignissim suspendisse in est ante. Venenatis lectus magna fringilla urna porttitor rhoncus dolor purus.","Lacus laoreet non curabitur gravida arcu ac tortor dignissim. Ut venenatis tellus in metus vulputate eu scelerisque felis. Enim blandit volutpat maecenas volutpat blandit aliquam. Porta lorem mollis aliquam ut porttitor leo a. Tortor vitae purus faucibus ornare suspendisse sed. Egestas fringilla phasellus faucibus scelerisque. Laoreet id donec ultrices tincidunt arcu non sodales neque sodales. A diam sollicitudin tempor id eu nisl nunc mi ipsum. Egestas sed tempus urna et pharetra pharetra massa massa ultricies. Feugiat in ante metus dictum. Ut morbi tincidunt augue interdum velit euismod in pellentesque massa. Urna nec tincidunt praesent semper feugiat nibh sed pulvinar proin. Diam quam nulla porttitor massa id. At volutpat diam ut venenatis tellus in metus vulputate eu. Dui ut ornare lectus sit amet est placerat in. Pulvinar elementum integer enim neque volutpat ac tincidunt vitae semper. Lectus urna duis convallis convallis tellus id interdum velit.","Lectus magna fringilla urna porttitor rhoncus dolor purus non. Pellentesque habitant morbi tristique senectus et netus et malesuada. Ac feugiat sed lectus vestibulum mattis ullamcorper velit. Nunc congue nisi vitae suscipit. Sed lectus vestibulum mattis ullamcorper velit sed. Neque laoreet suspendisse interdum consectetur libero. Egestas sed tempus urna et. Turpis tincidunt id aliquet risus feugiat in. Sed turpis tincidunt id aliquet risus feugiat. Ut morbi tincidunt augue interdum velit euismod in. Euismod in pellentesque massa placerat duis. Placerat orci nulla pellentesque dignissim enim sit amet. Id semper risus in hendrerit gravida rutrum quisque. Nunc scelerisque viverra mauris in aliquam sem fringilla ut morbi."],s=n.find((function(e){return/(http(s?):)/.test(e)}));s||(s=a[Math.floor(Math.random()*a.length)]),n.unshift(s),d.a.post("".concat(h.API_URL,"/story/create"),{content:n},{withCredentials:!0}).then((function(){console.log("created post")})).catch((function(e){console.log("failed to create post"),console.log("error: ",e)}))}},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){0===this.state.stories.length&&this.requestNextPage()}},{key:"fetchPage",value:function(e){var t=this;d.a.get("".concat(h.API_URL,"/story/page/").concat(e)).then((function(a){console.log("Fetched page ".concat(e," of stories")),t.setState({stories:[].concat(Object(f.a)(t.state.stories),Object(f.a)(a.data))})})).catch((function(t){console.log("Failed to fetched page ".concat(e," of stories"))}))}},{key:"getFocusPanel",value:function(){return this.state.focusPanelState}},{key:"render",value:function(){return s.a.createElement("div",{id:"view-stories-page"},s.a.createElement(v,{stories:this.state.stories,requestNextPage:this.requestNextPage,showStory:this.showStory}),this.state.useFocusPanel?this.getFocusPanel():s.a.createElement(E,{items:[{text:"Create",icon:"fas fa-edit",click:this.loadCreatePanel}]}))}}]),a}(n.Component),P=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={loggedinUser:{}},e.getUser=function(){d.a.get("".concat(h.API_URL,"/user"),{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data}),console.log("obtained user data")})).catch((function(e){401===e.response.status&&console.log("failed to obtain user data")}))},e.updateUserData=function(t){console.log("updating user data"),e.setState({loggedInUser:t})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.state.loggedInUser||this.getUser()}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(m.c,null,s.a.createElement(m.a,{path:"/",render:function(){return s.a.createElement(k,{loggedInUser:e.state.loggedInUser,updateUserData:e.updateUserData})}})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=a(15);o.a.render(s.a.createElement(A.a,null,s.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.15c4a340.chunk.js.map