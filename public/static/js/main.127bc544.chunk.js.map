{"version":3,"sources":["config.js","components/cards/StoryCard.js","components/panels/view/BrowseStoriesPanel.js","components/panels/view/create/CreateInput.js","components/navbar/Navitem.js","components/navbar/Navbar.js","components/panels/view/create/CreatePanel.js","components/panels/view/auth/AuthPanel.js","components/panels/view/viewCard/ViewCardPanel.js","components/panels/view/FocusPanel.js","components/pages/ViewStoriesPage.js","App.js","serviceWorker.js","index.js"],"names":["API_URL","process","StoryCard","getFirstImage","props","story","content","find","elem","test","getFirstTextSection","firstXWords","split","slice","join","this","id","className","Math","random","onClick","showStory","src","alt","onLoad","checkIfWide","Component","BrowseStoriesPanel","handleScroll","document","documentElement","scrollTop","window","innerHeight","offsetHeight","requestNextPage","addEventListener","removeEventListener","stories","map","index","key","CreateInput","state","sections","type","BLANK","OPTIONS","TEXT","IMAGE","wrapValue","section","handleAdd","sectype","handleTextInput","handleImageInput","name","onBlur","handleFocusOut","autoFocus","onChange","updateValue","value","placeholder","console","log","e","target","getAttribute","setState","removeSection","length","push","reindexSections","splice","NavItem","item","icon","click","stat","Navbar","items","CreatePanel","defaultImages","handleAccept","getFormContent","coverImage","floor","unshift","axios","post","config","withCredentials","then","catch","err","finally","returnToBrowse","formChildren","getElementById","childNodes","call","firstChild","filter","closeFocusPanel","text","AuthPanel","isSignIn","toggleAuthState","email","username","password","route","res","data","updateUserData","ViewCardPanel","get","_id","replaceStory","likes","dislikes","delete","removeStory","getContent","like","loggedInUser","patch","cssLikeDislikeElement","loadAuth","dislike","altStory","alteredStories","storyId","liked","getElementsByClassName","classList","add","remove","disliked","FocusPanel","panelState","getPanelComponent","loadCreate","loadViewCard","setPanelState","refreshStories","user","querySelector","ViewStoriesPage","page","useFocusPanel","focusPanelState","fetchPage","toggleUseFocusPanel","setUseFocusPanel","bool","loadCreatePanel","loadViewCardPanel","newStories","seedEmptyDatabase","i","response","getFocusPanel","App","loggedinUser","getUser","status","path","render","Boolean","location","hostname","match","ReactDOM","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"+dAAe,GAEXA,QAASC,mHAAYD,SAAW,iC,gBCCfE,G,8NA2BnBC,cAAgB,WACd,OAAO,EAAKC,MAAMC,MAAMC,QACvBC,MAAK,SAACC,GACL,MAAQ,cAAcC,KACpBD,O,EAKNE,oBAAsB,WAGpB,IAAIC,EAAc,EAAKP,MAAMC,MAAMC,QAClCC,MAAK,SAACC,GACL,OAAS,cAAcC,KACrBD,MASJ,OALGG,IAAaA,EAAcA,EAC7BC,MAAM,KACNC,MAAM,EAAG,IACTC,KAAK,MAECH,G,uDAlDC,IAAD,OACDN,EAAQU,KAAKX,MAAMC,MACzB,OACE,yBAAKW,GAAG,aAAaC,UAA4B,EAAhBC,KAAKC,SAAe,EAAK,uBAAyB,aAAcC,QAAS,WAAO,EAAKhB,MAAMiB,UAAUhB,KACtI,yBAAKW,GAAG,oBACN,yBACEA,GAAG,yBACHM,IAAKP,KAAKZ,gBACVoB,IAAI,cACJC,OAAQT,KAAKU,cAEf,yBAAKT,GAAG,yBACN,uBAAGA,GAAG,qBAIFD,KAAKL,sBAJT,c,GAb6BgB,cCIlBC,E,4MAWjBC,aAAe,WACUC,SAASC,gBAAgBC,UAAYC,OAAOC,cAAgBJ,SAASC,gBAAgBI,cAGxG,EAAK9B,MAAM+B,mB,kEAZbH,OAAOI,iBAAiB,SAAUrB,KAAKa,cAAc,K,6CAIrDI,OAAOK,oBAAoB,SAAUtB,KAAKa,cAAc,K,+BAYlD,IAAD,OACL,OACI,oCACI,yBAAKZ,GAAG,wBAEAD,KAAKX,MAAMkC,QAAQC,KAAI,SAAClC,EAAOmC,GAC3B,OAAO,kBAAC,EAAD,CAAWC,IAAKD,EAAOnC,MAAOA,EAAOgB,UAAW,EAAKjB,MAAMiB,qB,GAzB9CK,aCJ3BgB,G,8NAQnBC,MAAQ,CACNC,SAAU,GACVC,KAAM,CAEJC,MAAO,QACPC,QAAS,UACTC,KAAM,OACNC,MAAO,U,EAeXC,UAAY,SAACC,GACX,OAAQA,EAAQN,MACd,KAAK,EAAKF,MAAME,KAAKC,MACnB,OACE,yBAAK7B,UAAU,mBAAmBwB,IAAKU,EAAQX,OAC7C,yBAAKxB,GAAG,YACN,uBAAGC,UAAU,0BAA0BG,QAAS,EAAKgC,UAAWZ,MAAOW,EAAQX,MAAOa,QAASF,EAAQN,SAK/G,KAAK,EAAKF,MAAME,KAAKE,QACnB,OACE,yBAAK9B,UAAU,mBAAmBwB,IAAKU,EAAQX,OAC7C,yBAAKxB,GAAG,YACN,uBACEC,UAAU,0BACVG,QAAS,EAAKkC,gBACdd,MAAOW,EAAQX,MACfa,QAASF,EAAQN,OAEnB,uBACE5B,UAAU,2BACVG,QAAS,EAAKmC,iBACdf,MAAOW,EAAQX,MACfa,QAASF,EAAQN,SAM3B,KAAK,EAAKF,MAAME,KAAKG,KACnB,OACE,yBAAK/B,UAAU,mBAAmBwB,IAAKU,EAAQX,OAC7C,8BACEgB,KAAK,YACLvC,UAAU,mBACVwC,OAAQ,EAAKC,eACbC,WAAS,EACTC,SAAU,EAAKC,YACfC,MAAOX,EAAQW,MACftB,MAAOW,EAAQX,MACfa,QAASF,EAAQN,QAKzB,KAAK,EAAKF,MAAME,KAAKI,MACnB,OACE,yBAAKhC,UAAU,mBAAmBwB,IAAKU,EAAQX,OAC7C,2BACEK,KAAK,OACLW,KAAK,aACLvC,UAAU,oBACV8C,YAAY,YACZJ,WAAS,EACTC,SAAU,EAAKC,YACfC,MAAOX,EAAQW,MACftB,MAAOW,EAAQX,MACfa,QAASF,EAAQN,KACjBY,OAAQ,EAAKC,kBAKrB,QAEE,OADAM,QAAQC,IAAI,uCAEZ,yBAAKhD,UAAU,mBAAmBwB,IAAKU,EAAQX,U,EAOrDqB,YAAc,SAACK,GACb,IAAItB,EAAW,EAAKD,MAAMC,SAC1BA,EAASsB,EAAEC,OAAOC,aAAa,UAAUN,MAAQI,EAAEC,OAAOL,MAC1D,EAAKO,SAAS,CACVzB,SAAUA,K,EAIhBc,eAAiB,SAACQ,GACM,KAAnBA,EAAEC,OAAOL,OACR,EAAKQ,cAAcJ,GAGvB,IAAIrB,EAAO,GAKX,GAHG,EAAKF,MAAMC,SAAS2B,OAAS,IAC5B1B,EAAO,EAAKF,MAAMC,SAAS,EAAKD,MAAMC,SAAS2B,OAAS,GAAG1B,MAE5DA,IAAS,EAAKF,MAAME,KAAKC,OAASD,IAAS,EAAKF,MAAME,KAAKE,QAAS,CACnE,IAAIH,EAAW,EAAKD,MAAMC,SAC1BA,EAAS4B,KAAK,CAAE3B,KAAM,EAAKF,MAAME,KAAKC,MAAON,MAAO,EAAGsB,MAAO,KAC9D,EAAKO,SAAS,CACVzB,SAAUA,IAEd,EAAK6B,oB,EAIXH,cAAgB,SAACJ,GACf,IAAItB,EAAW,EAAKD,MAAMC,SAAS8B,OAAOR,EAAEC,OAAOC,aAAa,SAAU,GAC1E,EAAKC,SAAS,CACVzB,SAAUA,IAEd,EAAK6B,mB,EAGPA,gBAAkB,WAChB,IAAI7B,EAAW,EAAKD,MAAMC,SAC1BA,EAAWA,EAASL,KAAI,SAACY,EAASX,GAAkC,OAAvBW,EAAQX,MAAQA,EAAcW,KAC3E,EAAKkB,SAAS,CACVzB,SAAUA,K,EAIhBQ,UAAY,SAACc,GACX,IAAItB,EAAW,EAAKD,MAAMC,SAC1BA,EAASsB,EAAEC,OAAOC,aAAa,UAAUvB,KAAO,EAAKF,MAAME,KAAKE,QAChE,EAAKsB,SAAS,CACVzB,SAAUA,K,EAIhBU,gBAAkB,SAACY,GACjB,IAAItB,EAAW,EAAKD,MAAMC,SAC1BA,EAASsB,EAAEC,OAAOC,aAAa,UAAUvB,KAAO,EAAKF,MAAME,KAAKG,KAChE,EAAKqB,SAAS,CACVzB,SAAUA,K,EAIhBW,iBAAmB,SAACW,GAClB,IAAItB,EAAW,EAAKD,MAAMC,SAC1BA,EAASsB,EAAEC,OAAOC,aAAa,UAAUvB,KAAO,EAAKF,MAAME,KAAKI,MAChE,EAAKoB,SAAS,CACVzB,SAAUA,K,kEAtKd7B,KAAKsD,SAAS,CACZzB,SAAU,CAAC,CAAEC,KAAM9B,KAAK4B,MAAME,KAAKC,MAAON,MAAO,EAAGsB,MAAO,S,+BAerD,IAAD,OACP,OACE,oCACG/C,KAAK4B,MAAMC,SAASL,KAAI,SAACY,GACxB,OAAO,EAAKD,UAAUC,W,GAvBSzB,c,YCA1B,SAASiD,EAAQvE,GAE5B,OACI,yBAAKa,UAAU,YACX,uBAAGA,UAAWb,EAAMwE,KAAKC,KAAMzD,QAAShB,EAAMwE,KAAKE,QACjD1E,EAAMwE,KAAKG,KAAQ,uBAAG9D,UAAU,iBAAiBb,EAAMwE,KAAKG,MAAY,sCCJvE,SAASC,EAAO5E,GAG3B,OACI,yBAAKY,GAAG,UAEAZ,EAAM6E,MAAM1C,KAAI,SAACqC,EAAMpC,GACnB,OAAQ,kBAAC,EAAD,CAASoC,KAAMA,EAAMnC,IAAKD,Q,ICAjC0C,E,4MAEjBvC,MAAQ,CACJwC,cAAe,CACX,wIACA,wIACA,qIACA,wIACA,wIACA,0I,EA4BVC,aAAe,WAEb,IAAI9E,EAAU,EAAK+E,iBAGfC,EAAahF,EAAQC,MAAK,SAACC,GAC7B,MAAO,cAAcC,KAAKD,MAIvB8E,IACHA,EAAa,EAAK3C,MAAMwC,cACtBjE,KAAKqE,MAAMrE,KAAKC,SAAW,EAAKwB,MAAMwC,cAAcZ,SAEtDjE,EAAQkF,QACNF,IAKFG,IAAMC,KAAN,UACKC,EAAO3F,QADZ,iBAEE,CAAEM,WACF,CAAEsF,iBAAiB,IAElBC,MAAK,WACJ7B,QAAQC,IAAI,mBAEb6B,OAAM,SAACC,GACN/B,QAAQC,IAAI,yBACZD,QAAQC,IAAI,UAAW8B,MAExBC,SAAQ,WACP,EAAKC,qB,EAIbZ,eAAiB,WACf,IAAIa,EAAerE,SAASsE,eAAe,QAAQC,WAC/C9F,EAAU,GAAGiC,IAAI8D,KAAKH,GAAc,SAAC/C,GACvC,OAAOA,EAAQmD,WAAWxC,SAK5B,OAHAxD,EAAU,GAAGiG,OAAOF,KAAK/F,GAAS,SAAC6C,GACjC,OAAOA,M,EAKX8C,eAAiB,WACf,EAAK7F,MAAMoG,mB,uDAxEX,OACE,oCACE,0BAAMxF,GAAG,QACP,kBAAC,EAAD,MACA,kBAAC,EAAD,CACEiE,MAAO,CACL,CACEwB,KAAM,SACN5B,KAAM,eACNC,MAAO/D,KAAKqE,cAEd,CACEqB,KAAM,SACN5B,KAAM,eACNC,MAAO/D,KAAKkF,yB,GA5BavE,aCDpBgF,G,kNACnB/D,MAAQ,CACNgE,UAAU,G,EAGZC,gBAAkB,WAChB,EAAKvC,SAAS,CACZsC,UAAW,EAAKhE,MAAMgE,Y,EA6D1BV,eAAiB,WACf,EAAK7F,MAAMoG,mB,EAGbnB,eAAiB,WACf,IAAIa,EAAerE,SAASsE,eAAe,QAAQC,WAC/C9F,EAAU,GAAGiC,IAAI8D,KAAKH,GAAc,SAAC/C,GACvC,OAAOA,EAAQmD,WAAWxC,SAK5B,OAHAxD,EAAU,GAAGiG,OAAOF,KAAK/F,GAAS,SAAC6C,GACjC,OAAOA,M,EAKXiC,aAAe,WACb,IAAI9E,EAAU,EAAK+E,iBAGfwB,EAAQvG,EAAQ,GAChBwG,EAAWxG,EAAQ,GACnByG,EAAWzG,EAAQ,GACnB0G,EAAQH,EAAQ,SAAW,SAC/BpB,IACGC,KADH,UAEOC,EAAO3F,QAFd,YAEyBgH,GACrB,CACEH,MAAOA,EACPC,SAAUA,EACVC,SAAUA,GAEZ,CAAEnB,iBAAiB,IAEpBC,MAAK,SAACoB,GACLjD,QAAQC,IAAI,iBAAkBgD,EAAIC,KAAKJ,UACvC,EAAK1G,MAAM+G,eAAeF,EAAIC,MAG9B,EAAKjB,oBAENH,OAAM,SAACC,GACN/B,QAAQC,IAAI,+BACZD,QAAQC,IAAI,QAAS8B,GACrB,EAAKE,qB,uDAnGT,OACE,0BAAMjF,GAAG,QACND,KAAK4B,MAAMgE,SAAW,uCAAmB,uCAC1C,yBAAK1F,UAAU,kBACb,2BACE4B,KAAK,OACLkB,YAAY,WACZP,KAAK,WACLxC,GAAG,oBAGP,yBAAKC,UAAU,kBACb,2BACE4B,KAAK,WACLkB,YAAY,WACZP,KAAK,WACLxC,GAAG,oBAGND,KAAK4B,MAAMgE,SACV,uBAAG1F,UAAU,YAAYG,QAASL,KAAK6F,iBAAvC,YAIA,oCACE,yBAAK3F,UAAU,kBACb,2BACE4B,KAAK,QACLkB,YAAY,QACZP,KAAK,QACLxC,GAAG,iBAGP,uBAAGC,UAAU,YAAYG,QAASL,KAAK6F,iBAAvC,aAKJ,kBAAC,EAAD,CACE3B,MAAO,CACL,CACEwB,KAAM,SACN5B,KAAM,eACNC,MAAO/D,KAAKqE,cAEd,CACEqB,KAAM,SACN5B,KAAM,eACNC,MAAO/D,KAAKkF,wB,GA5DavE,cCAlB0F,G,kNAoCnBnB,eAAiB,WAEfR,IAAM4B,IAAN,UAAa1B,EAAO3F,QAApB,kBAAqC,EAAKI,MAAMC,MAAMiH,MACrDzB,MAAK,SAACxF,GACH,EAAKD,MAAMmH,aAAalH,GAEI,IAAxBA,EAAM6G,KAAKM,MAAQ,GAAUnH,EAAM6G,KAAKO,UACxChC,IAAMiC,OAAN,UAAgB/B,EAAO3F,QAAvB,kBAAwC,EAAKI,MAAMC,MAAMiH,MACxDzB,MAAK,WACF,EAAKzF,MAAMuH,YAAYtH,EAAM6G,MAC7BlD,QAAQC,IAAI,8BAEf6B,OAAM,WACH9B,QAAQC,IAAI,0CAIvB6B,OAAM,WACH9B,QAAQC,IAAI,0BAGhB,EAAK7D,MAAMoG,mB,EAGboB,WAAa,WAGX,OAAO,EAAKxH,MAAMC,MAAMC,QAAQiC,KAAI,SAACY,EAASX,GAE1C,MAAI,cAAc/B,KAAK0C,GAEf,yBAAK7B,IAAK6B,EAAS5B,IAAK,QAASN,UAAU,cAAcwB,IAAKD,IAI9D,6BAASvB,UAAU,aAAawB,IAAKD,GAChCW,O,EAQnB0E,KAAO,WACD,EAAKzH,MAAM0H,aAGXrC,IAAMsC,MAAN,UAAgBpC,EAAO3F,QAAvB,kBAAwC,EAAKI,MAAMC,MAAMiH,IAAzD,SAAqE,GAAI,CAAE1B,iBAAiB,IAC3FC,MAAK,WACFJ,IACC4B,IADD,UACQ1B,EAAO3F,QADf,SAC+B,CAAE4F,iBAAiB,IACjDC,MAAK,SAACoB,GACH,EAAKe,sBAAsBf,MAE9BnB,OAAM,SAACC,GACJ/B,QAAQC,IAAI,oCAGnB6B,OAAM,SAACC,GAAS/B,QAAQC,IAAI8B,MAb7B,EAAK3F,MAAM6H,Y,EAiBjBC,QAAU,WACJ,EAAK9H,MAAM0H,aAGXrC,IAAMsC,MAAN,UAAgBpC,EAAO3F,QAAvB,kBAAwC,EAAKI,MAAMC,MAAMiH,IAAzD,YAAwE,GAAI,CAAE1B,iBAAiB,IAC9FC,MAAK,WACF,EAAKmC,2BAERlC,OAAM,SAACC,GAAS/B,QAAQC,IAAI8B,MAN7B,EAAK3F,MAAM6H,Y,kEAlGXlH,KAAKiH,0B,+BAKT,OACI,oCACA,yBAAKhH,GAAG,qBACHD,KAAK6G,cAEV,kBAAC,EAAD,CACI3C,MAAO,CACH,CACAwB,KAAM,OACN5B,KAAM,mBACNC,MAAO/D,KAAK8G,MAEd,CACEpB,KAAM,UACN5B,KAAM,qBACNC,MAAO/D,KAAKmH,SAEd,CACEzB,KAAM,SACN5B,KAAM,eACNC,MAAO/D,KAAKkF,sB,8CAmFD,IAAD,OACtBR,IACS4B,IADT,UACgB1B,EAAO3F,QADvB,SACuC,CAAE4F,iBAAiB,IACjDC,MAAK,SAACoB,GACH,IAAIkB,EAAWlB,EAAIC,KAAKkB,eAAe7H,MAAK,SAAC2D,GAEzC,OADAF,QAAQC,IAAIC,EAAEmE,QAAU,IAAM,EAAKjI,MAAMC,MAAMiH,KACxCpD,EAAEmE,UAAY,EAAKjI,MAAMC,MAAMiH,OAEvCa,EAASG,MAAOzG,SAAS0G,uBAAuB,gBAAgB,GAAGC,UAAUC,IAAI,YAC/E5G,SAAS0G,uBAAuB,gBAAgB,GAAGC,UAAUE,OAAO,YACtEP,EAASQ,SAAU9G,SAAS0G,uBAAuB,kBAAkB,GAAGC,UAAUC,IAAI,YACpF5G,SAAS0G,uBAAuB,kBAAkB,GAAGC,UAAUE,OAAO,eAE9E5C,OAAM,SAACC,GACJ/B,QAAQC,IAAI,qC,GA7HevC,cCDtBkH,E,4MAEjBjG,MAAQ,CACJkG,WAAY,GACZf,aAAc,I,EA8BlBgB,kBAAoB,WAChB,OAAQ,EAAKnG,MAAMkG,YACf,IAAK,SAAW,OAAO,EAAKE,aAC5B,IAAK,WAAa,OAAO,EAAKC,aAAa,EAAK5I,MAAMC,OACtD,IAAK,OAAS,OAAO,EAAK4H,WAC1B,QACI,OAAO,uC,EAInBgB,cAAgB,SAACtG,GACb,EAAK0B,SAAS,CACVwE,WAAYlG,K,EAIpBoG,WAAa,WACT,OAAI,EAAKpG,MAAMmF,aAGJ,kBAAC,EAAD,CACNtB,gBAAiB,EAAKpG,MAAMoG,gBAC5B0C,eAAgB,EAAK9I,MAAM8I,iBAJrB,EAAKjB,Y,EASpBe,aAAe,SAAC3I,GACZ,OAAO,kBAAC,EAAD,CACFmG,gBAAiB,EAAKpG,MAAMoG,gBAC5BnG,MAAOA,EACP4H,SAAY,WAAO,EAAKgB,cAAc,SACtCnB,aAAc,EAAKnF,MAAMmF,aACzBP,aAAc,EAAKnH,MAAMmH,aAC1BI,YAAa,EAAKvH,MAAMuH,e,EAIhCM,SAAW,WACP,OAAO,kBAAC,EAAD,CAAWzB,gBAAiB,EAAKpG,MAAMoG,gBAAiBW,eAAgB,EAAKA,kB,EAIxFA,eAAiB,SAACgC,GACd,EAAK/I,MAAM+G,eAAegC,GAC1B,EAAK9E,SAAS,CACVyD,aAAcqB,K,kEAxElBtH,SAASuH,cAAc,QAAQZ,UAAUC,IAAI,iBAG7C1H,KAAKsD,SAAS,CACVwE,WAAY9H,KAAKX,MAAMyI,WACvBf,aAAc/G,KAAKX,MAAM0H,iB,6CAK7BjG,SAASuH,cAAc,QAAQZ,UAAUE,OAAO,mB,+BAIhD,OACI,oCACI,yBAAK1H,GAAG,eACJ,yBAAKA,GAAG,eACHD,KAAK+H,2B,GA1BUpH,aCGnB2H,E,4MACnB1G,MAAQ,CACNL,QAAS,GACTgH,KAAM,EACNC,eAAe,EACfC,gBAAiB,I,EAgCnBrH,gBAAkB,WAChB,EAAKsH,UAAU,EAAK9G,MAAM2G,MAC1B,EAAKjF,SAAS,CACZiF,KAAM,EAAK3G,MAAM2G,KAAO,K,EAI5BI,oBAAsB,WACpB,EAAKrF,SAAS,CACZkF,eAAgB,EAAK5G,MAAM4G,iB,EAI/BI,iBAAmB,SAACC,GAClB,EAAKvF,SAAS,CACZkF,cAAeK,K,EAInBC,gBAAkB,WAChB,EAAKxF,SAAS,CACZkF,eAAe,EACfC,gBACE,kBAAC,EAAD,CACEX,WAAY,SACZrC,gBAAiB,EAAKkD,oBACtB5B,aAAc,EAAK1H,MAAM0H,aACzBX,eAAgB,EAAK/G,MAAM+G,eAC3B+B,eAAgB,EAAKA,oB,EAM7BY,kBAAoB,SAACzJ,GACnB,EAAKgE,SAAS,CACZkF,eAAe,EACfC,gBACE,kBAAC,EAAD,CACEX,WAAY,WACZrC,gBAAiB,EAAKkD,oBACtB5B,aAAc,EAAK1H,MAAM0H,aACzBX,eAAgB,EAAK/G,MAAM+G,eAC3B+B,eAAgB,EAAKA,eACrB3B,aAAc,EAAKA,aACnBI,YAAa,EAAKA,YAClBtH,MAAOA,O,EAMfkH,aAAe,SAAClH,GACd,IAAI0J,EAAa,EAAKpH,MAAML,QAAQC,KAAI,SAAC/B,GACvC,OAAIA,EAAK8G,MAAQjH,EAAMiH,IACdjH,EAEAG,KAGX,EAAK6D,SAAS,CACZ/B,QAASyH,K,EAIbpC,YAAc,SAACtH,GACb,IAAI0J,EAAa,EAAKpH,MAAML,QAAQiE,QAAO,SAAC/F,GAC1C,OAAOA,EAAK8G,MAAQjH,EAAMiH,OAE5B,EAAKjD,SAAS,CACZ/B,QAASyH,K,EAUbb,eAAiB,WACf,EAAK7E,SAAS,CACZ/B,QAAS,GACTgH,KAAM,IAER,EAAKnH,mB,EAGPd,UAAY,SAAChB,GACX,EAAKyJ,kBAAkBzJ,I,EAkCzB2J,kBAAoB,WAClB,GAAkC,IAA9B,EAAKrH,MAAML,QAAQiC,OACrB,IAAK,IAAI0F,EAAI,EAAGA,EAAI,IAAKA,IAAK,CAC5B,IAAI9E,EAAgB,CAClB,wIACA,wIACA,qIACA,wIACA,wIACA,wIACA,yGACA,2GACA,yGACA,2GACA,2GACA,yGACA,2GACE,yGACA,0GAGA7E,EAAU,CACZ,6sBAEA,4oBAEA,+pBAEA,y8BAEA,2tBAIEgF,EAAahF,EAAQC,MAAK,SAACC,GAC7B,MAAO,cAAcC,KAAKD,MAIvB8E,IACHA,EAAaH,EACXjE,KAAKqE,MAAMrE,KAAKC,SAAWgE,EAAcZ,UAE7CjE,EAAQkF,QAAQF,GAGdG,IACGC,KADH,UAEOC,EAAO3F,QAFd,iBAGI,CAAEM,WACF,CAAEsF,iBAAiB,IAEpBC,MAAK,WACJ7B,QAAQC,IAAI,mBAEb6B,OAAM,SAACC,GACN/B,QAAQC,IAAI,yBACZD,QAAQC,IAAI,UAAW8B,Q,kEA9MC,IAA9BhF,KAAK4B,MAAML,QAAQiC,QACrBxD,KAAKoB,oB,gCASCmH,GAAO,IAAD,OACd7D,IACG4B,IADH,UACU1B,EAAO3F,QADjB,uBACuCsJ,IACpCzD,MAAK,SAACqE,GACLlG,QAAQC,IAAR,uBAA4BqF,EAA5B,gBACA,EAAKjF,SAAS,CACZ/B,QAAQ,GAAD,mBAAM,EAAKK,MAAML,SAAjB,YAA6B4H,EAAShD,YAGhDpB,OAAM,SAACC,GACN/B,QAAQC,IAAR,iCAAsCqF,EAAtC,qB,sCAiFJ,OAAOvI,KAAK4B,MAAM6G,kB,+BAkBlB,OACE,yBAAKxI,GAAG,qBACN,kBAAC,EAAD,CACEsB,QAASvB,KAAK4B,MAAML,QACpBH,gBAAiBpB,KAAKoB,gBACtBd,UAAWN,KAAKM,YAMhBN,KAAK4B,MAAM4G,cACTxI,KAAKoJ,gBAEL,kBAAC,EAAD,CACElF,MAAO,CACL,CACEwB,KAAM,SACN5B,KAAM,cACNC,MAAO/D,KAAK8I,yB,GArJenI,aCsD9B0I,E,4MAhDbzH,MAAQ,CACN0H,aAAc,I,EAuBhBC,QAAU,WACR7E,IACG4B,IADH,UACU1B,EAAO3F,QADjB,SACiC,CAAE4F,iBAAiB,IACjDC,MAAK,SAACoB,GACL,EAAK5C,SAAS,CACZyD,aAAcb,EAAIC,OAEpBlD,QAAQC,IAAI,yBAEb6B,OAAM,SAACC,GACsB,MAAxBA,EAAImE,SAASK,QACfvG,QAAQC,IAAI,kC,EAKpBkD,eAAiB,SAACD,GAChBlD,QAAQC,IAAI,sBACZ,EAAKI,SAAS,CACZyD,aAAcZ,K,kEAhDXnG,KAAK4B,MAAMmF,cACd/G,KAAKuJ,Y,+BAQC,IAAD,OACP,OACE,oCACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEE,KAAK,IACLC,OAAQ,WACN,OACE,kBAAC,EAAD,CACE3C,aAAc,EAAKnF,MAAMmF,aACzBX,eAAgB,EAAKA,0B,GArBrBzF,aCCEgJ,QACW,cAA7B1I,OAAO2I,SAASC,UAEe,UAA7B5I,OAAO2I,SAASC,UAEhB5I,OAAO2I,SAASC,SAASC,MACvB,2D,YCZNC,IAASL,OACP,kBAAC,IAAD,KACE,kBAAC,EAAD,OAEF5I,SAASsE,eAAe,SDyHpB,kBAAmB4E,WACrBA,UAAUC,cAAcC,MACrBpF,MAAK,SAAAqF,GACJA,EAAaC,gBAEdrF,OAAM,SAAAsF,GACLpH,QAAQoH,MAAMA,EAAMC,c","file":"static/js/main.127bc544.chunk.js","sourcesContent":["export default {\r\n    //API_URL: process.env.API_URL || 'http://localhost:5000/api'\r\n    API_URL: process.env.API_URL || 'https://blustr.herokuapp.com/'\r\n}","import React, { Component } from \"react\";\r\nimport \"./styles/StoryCard.css\";\r\n\r\nexport default class StoryCard extends Component {\r\n  render() {\r\n    const story = this.props.story;\r\n    return (\r\n      <div id=\"story-card\" className={(Math.random() * 5 < 1) ? 'story-card card-wide' : 'story-card'} onClick={() => {this.props.showStory(story)}}>\r\n      <div id='inner-story-card'>\r\n        <img\r\n          id=\"story-card-cover-image\"\r\n          src={this.getFirstImage()}\r\n          alt=\"story cover\"\r\n          onLoad={this.checkIfWide}\r\n        />\r\n        <div id=\"story-card-text-panel\">\r\n          <p id=\"story-card-teaser\">\r\n            {\r\n              // find first content entry that isn't an image address\r\n              // only displays first 20 words as it's a teaser\r\n              this.getFirstTextSection()\r\n            }\r\n            ...\r\n          </p>\r\n        </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  getFirstImage = () => {\r\n    return this.props.story.content\r\n    .find((elem) => {\r\n      return (/(http(s?):)/.test(\r\n        elem\r\n      ));\r\n    })\r\n  }\r\n\r\n  getFirstTextSection = () => {\r\n      \r\n    // finds first text section and rips the first few words to display\r\n    let firstXWords = this.props.story.content\r\n    .find((elem) => {\r\n      return !(/(http(s?):)/.test(\r\n        elem\r\n      ));\r\n    })\r\n\r\n    if(firstXWords) firstXWords = firstXWords\r\n    .split(\" \")\r\n    .slice(0, 10)\r\n    .join(\" \");\r\n\r\n    return firstXWords;\r\n\r\n  }\r\n\r\n}","// libraries\r\nimport React, {Component} from 'react';\r\n// styles\r\nimport './styles/BrowseStoriesPanel.css'\r\n// components\r\nimport StoryCard from '../../cards/StoryCard'\r\n\r\nexport default class BrowseStoriesPanel extends Component {\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('scroll', this.handleScroll, false);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll, false);\r\n    }\r\n\r\n    // calls for next page of stories if user has scrolled to the bottom of the screen\r\n    handleScroll = () => {\r\n        let bottomOfWindow = document.documentElement.scrollTop + window.innerHeight === document.documentElement.offsetHeight;\r\n  \r\n        if (bottomOfWindow) {\r\n          this.props.requestNextPage();\r\n        }\r\n      };\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div id='browse-stories-panel'>\r\n                    {\r\n                        this.props.stories.map((story, index) => {\r\n                            return <StoryCard key={index} story={story} showStory={this.props.showStory}/>\r\n                        })\r\n                    }\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n\r\n}","import React, { Component } from \"react\";\r\nimport \"./styles/CreateInput.css\";\r\n\r\nexport default class CreateInput extends Component {\r\n  \r\n  componentDidMount() {\r\n    this.setState({\r\n      sections: [{ type: this.state.type.BLANK, index: 0, value: \"\" }],\r\n    });\r\n  }\r\n\r\n  state = {\r\n    sections: [],\r\n    type: {\r\n      // defines type of html element to wrap section in later\r\n      BLANK: 'BLANK',\r\n      OPTIONS: 'OPTIONS',\r\n      TEXT: 'TEXT',\r\n      IMAGE: 'IMAGE',\r\n    },\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        {this.state.sections.map((section) => {\r\n          return this.wrapValue(section);\r\n        })}\r\n      </>\r\n    );\r\n  }\r\n\r\n  // expects sections to have at least {type, value, index}\r\n  wrapValue = (section) => {\r\n    switch (section.type) {\r\n      case this.state.type.BLANK: {\r\n        return (\r\n          <div className=\"create-input-div\" key={section.index}>\r\n            <div id=\"icon-div\">\r\n              <i className=\"fas fa-plus create-icon\" onClick={this.handleAdd} index={section.index} sectype={section.type}/>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n      case this.state.type.OPTIONS: {\r\n        return (\r\n          <div className=\"create-input-div\" key={section.index}>\r\n            <div id=\"icon-div\">\r\n              <i\r\n                className=\"fas fa-edit create-icon\"\r\n                onClick={this.handleTextInput}\r\n                index={section.index}\r\n                sectype={section.type}\r\n              />\r\n              <i\r\n                className=\"fas fa-image create-icon\"\r\n                onClick={this.handleImageInput}\r\n                index={section.index}\r\n                sectype={section.type}\r\n              />\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n      case this.state.type.TEXT: {\r\n        return (\r\n          <div className=\"create-input-div\" key={section.index}>\r\n            <textarea\r\n              name=\"textInput\"\r\n              className=\"create-textInput\"\r\n              onBlur={this.handleFocusOut}\r\n              autoFocus\r\n              onChange={this.updateValue}\r\n              value={section.value}\r\n              index={section.index}\r\n              sectype={section.type}\r\n            ></textarea>\r\n          </div>\r\n        );\r\n      }\r\n      case this.state.type.IMAGE: {\r\n        return (\r\n          <div className=\"create-input-div\" key={section.index}>\r\n            <input\r\n              type=\"text\"\r\n              name=\"imageInput\"\r\n              className=\"create-imageInput\"\r\n              placeholder=\"image url\"\r\n              autoFocus\r\n              onChange={this.updateValue}\r\n              value={section.value}\r\n              index={section.index}\r\n              sectype={section.type}\r\n              onBlur={this.handleFocusOut}\r\n            />\r\n          </div>\r\n        );\r\n      }\r\n      default: {\r\n        console.log(\"Unknown section type in CreateInput\");\r\n        return (\r\n        <div className=\"create-input-div\" key={section.index}>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  updateValue = (e) => {\r\n    let sections = this.state.sections;\r\n    sections[e.target.getAttribute('index')].value = e.target.value;\r\n    this.setState({\r\n        sections: sections\r\n    })\r\n  };\r\n\r\n  handleFocusOut = (e) => {\r\n    if(e.target.value === '') {\r\n        this.removeSection(e);\r\n    }\r\n\r\n    let type = '';\r\n\r\n    if(this.state.sections.length > 0) {\r\n        type = this.state.sections[this.state.sections.length - 1].type;\r\n    }\r\n    if(type !== this.state.type.BLANK && type !== this.state.type.OPTIONS) {\r\n        let sections = this.state.sections;\r\n        sections.push({ type: this.state.type.BLANK, index: 0, value: \"\" });\r\n        this.setState({\r\n            sections: sections\r\n        });\r\n        this.reindexSections();\r\n    }\r\n  };\r\n\r\n  removeSection = (e) => {\r\n    let sections = this.state.sections.splice(e.target.getAttribute('index'), 1);\r\n    this.setState({\r\n        sections: sections\r\n    })\r\n    this.reindexSections();\r\n  }\r\n\r\n  reindexSections = () => {\r\n    let sections = this.state.sections;\r\n    sections = sections.map((section, index) => {section.index = index; return section;})\r\n    this.setState({\r\n        sections: sections\r\n    })\r\n  }\r\n\r\n  handleAdd = (e) => {\r\n    let sections = this.state.sections;\r\n    sections[e.target.getAttribute('index')].type = this.state.type.OPTIONS;\r\n    this.setState({\r\n        sections: sections\r\n    })\r\n  }\r\n\r\n  handleTextInput = (e) => {\r\n    let sections = this.state.sections;\r\n    sections[e.target.getAttribute('index')].type = this.state.type.TEXT;\r\n    this.setState({\r\n        sections: sections\r\n    })\r\n  }\r\n\r\n  handleImageInput = (e) => {\r\n    let sections = this.state.sections;\r\n    sections[e.target.getAttribute('index')].type = this.state.type.IMAGE;\r\n    this.setState({\r\n        sections: sections\r\n    })\r\n  }\r\n}\r\n","import React from 'react';\r\nimport './styles/Navitem.css'\r\n\r\nexport default function NavItem(props) {\r\n    //takes props in the form {text, icon, click}\r\n    return (\r\n        <div className='nav-icon'>\r\n            <i className={props.item.icon} onClick={props.item.click}/>\r\n            {(props.item.stat) ? <p className='nav-icon-stat'>{props.item.stat}</p> : <></>}\r\n        </div>\r\n    );\r\n\r\n}","import React from 'react';\r\nimport './styles/Navbar.css'\r\nimport Navitem from './Navitem'\r\n\r\nexport default function Navbar(props) {\r\n\r\n    // takes props in the form [{text, icon, clickFunction}]\r\n    return (\r\n        <div id='navbar'>\r\n            {\r\n                props.items.map((item, index) => {\r\n                    return (<Navitem item={item} key={index}/>)\r\n                })\r\n            }\r\n        </div>\r\n    );\r\n\r\n}","// libraries\r\nimport React, { Component } from \"react\";\r\nimport axios from 'axios';\r\n// useful data\r\nimport config from '../../../../config'\r\n// styles\r\nimport \"./styles/CreatePanel.css\";\r\n// components\r\nimport CreateInput from \"./CreateInput\";\r\nimport Navbar from \"../../../navbar/Navbar\";\r\n\r\nexport default class CreatePanel extends Component {\r\n\r\n    state = {\r\n        defaultImages: [\r\n            \"https://images.unsplash.com/photo-1514866546504-0c2bbda5f16d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60\",\r\n            \"https://images.unsplash.com/photo-1510191250627-6fdf443cfec4?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60\",\r\n            \"https://images.unsplash.com/photo-1554174532-48b37f80a254?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60\",\r\n            \"https://images.unsplash.com/photo-1530800633399-2d35227b35b2?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60\",\r\n            \"https://images.unsplash.com/photo-1512237260610-23782f4c1bfe?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60\",\r\n            \"https://images.unsplash.com/photo-1572989753782-accb88ad01f0?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=634&q=80\",\r\n        ],\r\n    }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <form id=\"form\">\r\n          <CreateInput />\r\n          <Navbar\r\n            items={[\r\n              {\r\n                text: \"Accept\",\r\n                icon: \"fas fa-check\",\r\n                click: this.handleAccept,\r\n              },\r\n              {\r\n                text: \"Cancel\",\r\n                icon: \"fas fa-times\",\r\n                click: this.returnToBrowse,\r\n              },\r\n            ]}\r\n          />\r\n        </form>\r\n      </>\r\n    );\r\n  }\r\n\r\n  handleAccept = () => {\r\n    // get data\r\n    let content = this.getFormContent();\r\n\r\n    // get first image in content (if any)\r\n    let coverImage = content.find((elem) => {\r\n      return /(http(s?):)/.test(elem);\r\n    });\r\n\r\n    // if no images in content, append a random default one to the start\r\n    if (!coverImage) {\r\n      coverImage = this.state.defaultImages[\r\n        Math.floor(Math.random() * this.state.defaultImages.length)\r\n      ];\r\n      content.unshift(\r\n        coverImage\r\n      );\r\n  }\r\n\r\n      // create story in database\r\n      axios.post(\r\n        `${config.API_URL}/story/create`,\r\n        { content },\r\n        { withCredentials: true }\r\n      )\r\n        .then(() => {\r\n          console.log(\"created post\");\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"failed to create post\");\r\n          console.log(\"error: \", err);\r\n        })\r\n        .finally(() => {\r\n          this.returnToBrowse();\r\n        });\r\n  };\r\n\r\n  getFormContent = () => {\r\n    let formChildren = document.getElementById(\"form\").childNodes;\r\n    let content = [].map.call(formChildren, (section) => {\r\n      return section.firstChild.value;\r\n    });\r\n    content = [].filter.call(content, (section) => {\r\n      return section;\r\n    });\r\n    return content;\r\n  };\r\n\r\n  returnToBrowse = () => {\r\n    this.props.closeFocusPanel();\r\n  };\r\n}\r\n","// libraries\r\nimport React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\n// useful data\r\nimport config from \"../../../../config\";\r\n// styles\r\nimport \"./styles/AuthPanel.css\";\r\n//components\r\nimport Navbar from \"../../../navbar/Navbar\";\r\n\r\nexport default class AuthPanel extends Component {\r\n  state = {\r\n    isSignIn: true,\r\n  };\r\n\r\n  toggleAuthState = () => {\r\n    this.setState({\r\n      isSignIn: !this.state.isSignIn,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <form id=\"form\">\r\n        {this.state.isSignIn ? <h1>Sign In</h1> : <h1>Sign Up</h1>}\r\n        <div className=\"auth-input-div\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"username\"\r\n            name=\"username\"\r\n            id=\"username-input\"\r\n          />\r\n        </div>\r\n        <div className=\"auth-input-div\">\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"password\"\r\n            name=\"password\"\r\n            id=\"password-input\"\r\n          />\r\n        </div>\r\n        {this.state.isSignIn ? (\r\n          <p className=\"auth-link\" onClick={this.toggleAuthState}>\r\n            Sign Up?\r\n          </p>\r\n        ) : (\r\n          <>\r\n            <div className=\"auth-input-div\">\r\n              <input\r\n                type=\"email\"\r\n                placeholder=\"email\"\r\n                name=\"email\"\r\n                id=\"email-input\"\r\n              />\r\n            </div>\r\n            <p className=\"auth-link\" onClick={this.toggleAuthState}>\r\n              Sign In?\r\n            </p>\r\n          </>\r\n        )}\r\n        <Navbar\r\n          items={[\r\n            {\r\n              text: \"Accept\",\r\n              icon: \"fas fa-check\",\r\n              click: this.handleAccept,\r\n            },\r\n            {\r\n              text: \"Cancel\",\r\n              icon: \"fas fa-times\",\r\n              click: this.returnToBrowse,\r\n            },\r\n          ]}\r\n        />\r\n      </form>\r\n    );\r\n  }\r\n\r\n  returnToBrowse = () => {\r\n    this.props.closeFocusPanel();\r\n  };\r\n\r\n  getFormContent = () => {\r\n    let formChildren = document.getElementById(\"form\").childNodes;\r\n    let content = [].map.call(formChildren, (section) => {\r\n      return section.firstChild.value;\r\n    });\r\n    content = [].filter.call(content, (section) => {\r\n      return section;\r\n    });\r\n    return content;\r\n  };\r\n\r\n  handleAccept = () => {\r\n    let content = this.getFormContent();\r\n    // create post\r\n\r\n    let email = content[2];\r\n    let username = content[0];\r\n    let password = content[1];\r\n    let route = email ? \"signup\" : \"signin\";\r\n    axios\r\n      .post(\r\n        `${config.API_URL}/${route}`,\r\n        {\r\n          email: email,\r\n          username: username,\r\n          password: password,\r\n        },\r\n        { withCredentials: true }\r\n      )\r\n      .then((res) => {\r\n        console.log('Created user: ', res.data.username)\r\n        this.props.updateUserData(res.data);\r\n        // should reroute to whatever panel called it by default now.\r\n        // does not however\r\n        this.returnToBrowse();\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"failed to create/login user\");\r\n        console.log('err: ', err);\r\n        this.returnToBrowse();\r\n      });\r\n  };\r\n}\r\n","// libraries\r\nimport React, { Component } from \"react\";\r\nimport axios from 'axios';\r\n// useful data\r\nimport config from '../../../../config'\r\n// styles\r\nimport \"./styles/ViewCardPanel.css\";\r\n// components\r\nimport Navbar from \"../../../navbar/Navbar\"\r\n\r\nexport default class ViewCardPanel extends Component {\r\n\r\n    componentDidMount() {\r\n        this.cssLikeDislikeElement();\r\n    }\r\n\r\n  render() {\r\n\r\n    return (\r\n        <>\r\n        <div id='view-card-content'>\r\n            {this.getContent()}\r\n        </div>\r\n        <Navbar\r\n            items={[\r\n                {\r\n                text: \"Like\",\r\n                icon: \"fas fa-thumbs-up\",\r\n                click: this.like\r\n              },\r\n              {\r\n                text: \"Dislike\",\r\n                icon: \"fas fa-thumbs-down\",\r\n                click: this.dislike\r\n              },\r\n              {\r\n                text: \"Cancel\",\r\n                icon: \"fas fa-times\",\r\n                click: this.returnToBrowse,\r\n              },\r\n            ]}\r\n          />\r\n          </>\r\n    );\r\n  }\r\n\r\n  returnToBrowse = () => {\r\n\r\n    axios.get(`${config.API_URL}/story/${this.props.story._id}`)\r\n    .then((story) => {\r\n        this.props.replaceStory(story);\r\n        // has to be +1 likes, else if it gets disliked with 0 likes it gets deleted\r\n        if((story.data.likes + 1) * 10 < story.data.dislikes) {\r\n            axios.delete(`${config.API_URL}/story/${this.props.story._id}`)\r\n            .then(() => {\r\n                this.props.removeStory(story.data);\r\n                console.log('removed unpopular story');\r\n            })\r\n            .catch(() => {\r\n                console.log('failed to remove unpopular story');\r\n            })\r\n        }\r\n    })\r\n    .catch(() => {\r\n        console.log('failed to get story');\r\n    })\r\n\r\n    this.props.closeFocusPanel();\r\n  };\r\n\r\n  getContent = () => {\r\n      \r\n    // seperate content out into images and text and wrap them accordingly\r\n    return this.props.story.content.map((section, index) => {\r\n        // link ... or in this current build, an image\r\n        if((/(http(s?):)/.test(section))) {\r\n            return (\r\n                <img src={section} alt={'story'} className='story-image' key={index}/>\r\n            )\r\n        } else { // not a link. text for now\r\n            return (\r\n                <article className='story-text' key={index}>\r\n                    {section}\r\n                </article>\r\n            )\r\n        }\r\n    })\r\n\r\n  }\r\n\r\n  like = () => {\r\n    if(!this.props.loggedInUser) {\r\n        this.props.loadAuth();\r\n    } else {\r\n        axios.patch( `${config.API_URL}/story/${this.props.story._id}/like`, {}, { withCredentials: true })\r\n        .then(() => {\r\n            axios\r\n            .get(`${config.API_URL}/user`, { withCredentials: true })\r\n            .then((res) => {\r\n                this.cssLikeDislikeElement(res);\r\n            })\r\n            .catch((err) => {\r\n                console.log(\"failed to obtain user data\");\r\n            });\r\n        })\r\n        .catch((err) => {console.log(err)})\r\n    }\r\n  }\r\n\r\n  dislike = () => {\r\n    if(!this.props.loggedInUser) {\r\n        this.props.loadAuth();\r\n    } else {\r\n        axios.patch( `${config.API_URL}/story/${this.props.story._id}/dislike`, {}, { withCredentials: true })\r\n        .then(() => {\r\n            this.cssLikeDislikeElement();\r\n        })\r\n        .catch((err) => {console.log(err)})\r\n    }\r\n  }\r\n\r\n  cssLikeDislikeElement() {\r\n    axios\r\n            .get(`${config.API_URL}/user`, { withCredentials: true })\r\n            .then((res) => {\r\n                let altStory = res.data.alteredStories.find((e) => {\r\n                    console.log(e.storyId + \" \" + this.props.story._id);\r\n                    return e.storyId === this.props.story._id;\r\n                });\r\n                if(altStory.liked) document.getElementsByClassName('fa-thumbs-up')[0].classList.add('selected');\r\n                else document.getElementsByClassName('fa-thumbs-up')[0].classList.remove('selected');\r\n                if(altStory.disliked) document.getElementsByClassName('fa-thumbs-down')[0].classList.add('selected');\r\n                else document.getElementsByClassName('fa-thumbs-down')[0].classList.remove('selected');\r\n            })\r\n            .catch((err) => {\r\n                console.log(\"failed to obtain user data\");\r\n            });\r\n  }\r\n\r\n}","// libraries\r\nimport React, {Component} from 'react';\r\n// styles\r\nimport './styles/FocusPanel.css'\r\n// components\r\nimport CreatePanel from './create/CreatePanel';\r\nimport AuthPanel from './auth/AuthPanel'\r\nimport ViewCardPanel from './viewCard/ViewCardPanel'\r\n\r\nexport default class FocusPanel extends Component {\r\n\r\n    state = {\r\n        panelState: '', // The specific component to load onto the base panel\r\n        loggedInUser: {},\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.querySelector('body').classList.add('scroll-freeze');\r\n        // if called from ViewStoriesPage, this sets the panelState passed through\r\n        // otherwise it can direct it's own state\r\n        this.setState({\r\n            panelState: this.props.panelState,\r\n            loggedInUser: this.props.loggedInUser,\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.querySelector('body').classList.remove('scroll-freeze');\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div id='focus-panel'>\r\n                    <div id='inner-panel'>\r\n                        {this.getPanelComponent()}\r\n                    </div>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n\r\n    // returns component based on the panel state\r\n    getPanelComponent = () => {\r\n        switch (this.state.panelState) {\r\n            case 'create' : return this.loadCreate();\r\n            case 'viewCard' : return this.loadViewCard(this.props.story);\r\n            case 'auth' : return this.loadAuth();\r\n            default:\r\n                return <></>\r\n        }\r\n    }\r\n\r\n    setPanelState = (state) => {\r\n        this.setState({\r\n            panelState: state\r\n        });\r\n    }\r\n\r\n    loadCreate = () => {\r\n        if(!this.state.loggedInUser) {\r\n            return this.loadAuth();\r\n        } else {\r\n            return <CreatePanel\r\n             closeFocusPanel={this.props.closeFocusPanel}\r\n             refreshStories={this.props.refreshStories}\r\n             />\r\n        }\r\n    }\r\n\r\n    loadViewCard = (story) => {\r\n        return <ViewCardPanel\r\n             closeFocusPanel={this.props.closeFocusPanel}\r\n             story={story}\r\n             loadAuth = {() => {this.setPanelState('auth')}}\r\n             loggedInUser={this.state.loggedInUser}\r\n             replaceStory={this.props.replaceStory}\r\n            removeStory={this.props.removeStory}\r\n             />\r\n    }\r\n\r\n    loadAuth = () => {\r\n        return <AuthPanel closeFocusPanel={this.props.closeFocusPanel} updateUserData={this.updateUserData}/>\r\n    }\r\n\r\n    // ensures that user can use user priviledges without reloading page\r\n    updateUserData = (user) => {\r\n        this.props.updateUserData(user);\r\n        this.setState({\r\n            loggedInUser: user\r\n        });\r\n    }\r\n\r\n}","// libraries\r\nimport React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\n// useful data\r\nimport config from \"../../config.js\";\r\n// styles\r\nimport \"./styles/ViewStoriesPage.css\";\r\n// components\r\nimport BrowseStoriesPanel from \"../panels/view/BrowseStoriesPanel\";\r\nimport FocusPanel from \"../panels/view/FocusPanel\";\r\nimport Navbar from \"../navbar/Navbar\";\r\n\r\nexport default class ViewStoriesPage extends Component {\r\n  state = {\r\n    stories: [],\r\n    page: 0, // data has to be split into pages for the infinite scroll feature to work\r\n    useFocusPanel: false, // toggles the panel that other view features branch from, such as create, auth and viewing a single story.\r\n    focusPanelState: \"\", // series of states for the focuspanel component to switch between\r\n  };\r\n\r\n  componentDidMount() {\r\n    // fetches first page of data if it's not already downloaded.\r\n    // stops refreshing from creating a large stack of duplicate data.\r\n    if (this.state.stories.length === 0) {\r\n      this.requestNextPage();\r\n    }\r\n    //this.seedEmptyDatabase(); // for creating dummy content\r\n  }\r\n\r\n  // pulls the requested page of data from the database\r\n  // does not update the page number in state\r\n  // also does not check to see if page has already been downloaded\r\n  // so useful fixes to include\r\n  fetchPage(page) {\r\n    axios\r\n      .get(`${config.API_URL}/story/page/${page}`)\r\n      .then((response) => {\r\n        console.log(`Fetched page ${page} of stories`);\r\n        this.setState({\r\n          stories: [...this.state.stories, ...response.data],\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Failed to fetched page ${page} of stories`);\r\n      });\r\n  }\r\n\r\n  // Gets next page of story data then increase the page number\r\n  // to help stop duplicate pages\r\n  requestNextPage = () => {\r\n    this.fetchPage(this.state.page);\r\n    this.setState({\r\n      page: this.state.page + 1,\r\n    });\r\n  };\r\n\r\n  toggleUseFocusPanel = () => {\r\n    this.setState({\r\n      useFocusPanel: !this.state.useFocusPanel,\r\n    });\r\n  };\r\n\r\n  setUseFocusPanel = (bool) => {\r\n    this.setState({\r\n      useFocusPanel: bool,\r\n    });\r\n  };\r\n\r\n  loadCreatePanel = () => {\r\n    this.setState({\r\n      useFocusPanel: true,\r\n      focusPanelState: (\r\n        <FocusPanel\r\n          panelState={\"create\"}\r\n          closeFocusPanel={this.toggleUseFocusPanel}\r\n          loggedInUser={this.props.loggedInUser}\r\n          updateUserData={this.props.updateUserData}\r\n          refreshStories={this.refreshStories}\r\n        />\r\n      ),\r\n    });\r\n  };\r\n\r\n  loadViewCardPanel = (story) => {\r\n    this.setState({\r\n      useFocusPanel: true,\r\n      focusPanelState: (\r\n        <FocusPanel\r\n          panelState={\"viewCard\"}\r\n          closeFocusPanel={this.toggleUseFocusPanel}\r\n          loggedInUser={this.props.loggedInUser}\r\n          updateUserData={this.props.updateUserData}\r\n          refreshStories={this.refreshStories}\r\n          replaceStory={this.replaceStory}\r\n          removeStory={this.removeStory}\r\n          story={story}\r\n        />\r\n      ),\r\n    });\r\n  };\r\n\r\n  replaceStory = (story) => {\r\n    let newStories = this.state.stories.map((elem) => {\r\n      if (elem._id === story._id) {\r\n        return story;\r\n      } else {\r\n        return elem;\r\n      }\r\n    });\r\n    this.setState({\r\n      stories: newStories,\r\n    });\r\n  };\r\n\r\n  removeStory = (story) => {\r\n    let newStories = this.state.stories.filter((elem) => {\r\n      return elem._id !== story._id;\r\n    });\r\n    this.setState({\r\n      stories: newStories,\r\n    });\r\n  };\r\n\r\n  getFocusPanel() {\r\n    return this.state.focusPanelState;\r\n  }\r\n\r\n  // reboots the stories array.\r\n  // using it mainly for showing new posts\r\n  refreshStories = () => {\r\n    this.setState({\r\n      stories: [],\r\n      page: 0,\r\n    });\r\n    this.requestNextPage();\r\n  };\r\n\r\n  showStory = (story) => {\r\n    this.loadViewCardPanel(story);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"view-stories-page\">\r\n        <BrowseStoriesPanel\r\n          stories={this.state.stories}\r\n          requestNextPage={this.requestNextPage}\r\n          showStory={this.showStory}\r\n        />\r\n        {\r\n          // Navbar is called seperately in other components in focus panel.\r\n          // But has to be called otherwise here.\r\n          // panelState is used to call the specific panel built on top of the base focusPanel\r\n          this.state.useFocusPanel ? (\r\n            this.getFocusPanel()\r\n          ) : (\r\n            <Navbar\r\n              items={[\r\n                {\r\n                  text: \"Create\",\r\n                  icon: \"fas fa-edit\",\r\n                  click: this.loadCreatePanel,\r\n                },\r\n              ]}\r\n            />\r\n          )\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // for creating dummy content\r\n  seedEmptyDatabase = () => {\r\n    if (this.state.stories.length === 0) {\r\n      for (let i = 0; i < 100; i++) {\r\n        let defaultImages = [\r\n          \"https://images.unsplash.com/photo-1514866546504-0c2bbda5f16d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60\",\r\n          \"https://images.unsplash.com/photo-1510191250627-6fdf443cfec4?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60\",\r\n          \"https://images.unsplash.com/photo-1554174532-48b37f80a254?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60\",\r\n          \"https://images.unsplash.com/photo-1530800633399-2d35227b35b2?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60\",\r\n          \"https://images.unsplash.com/photo-1512237260610-23782f4c1bfe?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60\",\r\n          \"https://images.unsplash.com/photo-1572989753782-accb88ad01f0?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=634&q=80\",\r\n          \"https://images.pexels.com/photos/730256/pexels-photo-730256.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500\",\r\n          \"https://images.pexels.com/photos/1366919/pexels-photo-1366919.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500\",\r\n          \"https://images.pexels.com/photos/799420/pexels-photo-799420.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500\",\r\n          \"https://images.pexels.com/photos/3792580/pexels-photo-3792580.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500\",\r\n          \"https://images.pexels.com/photos/2387877/pexels-photo-2387877.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500\",\r\n          \"https://images.pexels.com/photos/949592/pexels-photo-949592.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500\",\r\n          \"https://images.pexels.com/photos/2233416/pexels-photo-2233416.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500\",\r\n            \"https://images.pexels.com/photos/721287/pexels-photo-721287.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500\",\r\n            \"https://images.pexels.com/photos/730256/pexels-photo-730256.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500\",\r\n        ];\r\n\r\n        let content = [\r\n          \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Nisi porta lorem mollis aliquam ut. Urna duis convallis convallis tellus id interdum velit laoreet. Maecenas pharetra convallis posuere morbi leo urna molestie at elementum. Elementum eu facilisis sed odio. Placerat vestibulum lectus mauris ultrices eros in. Sem integer vitae justo eget magna fermentum. Malesuada fames ac turpis egestas sed tempus urna et. Diam in arcu cursus euismod quis viverra nibh. Pharetra pharetra massa massa ultricies mi. Ante in nibh mauris cursus mattis molestie a. Aliquam nulla facilisi cras fermentum odio eu. In nulla posuere sollicitudin aliquam ultrices.\",\r\n\r\n          \"At varius vel pharetra vel turpis nunc eget lorem. Lectus mauris ultrices eros in. Urna duis convallis convallis tellus id interdum velit. Leo in vitae turpis massa. Adipiscing tristique risus nec feugiat in fermentum posuere. Sit amet cursus sit amet dictum. Porta non pulvinar neque laoreet. Luctus venenatis lectus magna fringilla urna. In cursus turpis massa tincidunt dui ut. Amet venenatis urna cursus eget nunc scelerisque viverra. Tincidunt dui ut ornare lectus sit amet est placerat in. Rhoncus urna neque viverra justo nec ultrices dui. Auctor augue mauris augue neque gravida. Neque convallis a cras semper auctor neque vitae tempus quam.\",\r\n\r\n          \"Diam sollicitudin tempor id eu nisl nunc mi ipsum. Amet venenatis urna cursus eget. Turpis egestas integer eget aliquet nibh praesent. Tortor pretium viverra suspendisse potenti nullam ac. Egestas congue quisque egestas diam in arcu cursus. Suspendisse interdum consectetur libero id faucibus nisl tincidunt. Integer feugiat scelerisque varius morbi. Tellus elementum sagittis vitae et leo duis ut diam quam. Dolor sit amet consectetur adipiscing. Lectus arcu bibendum at varius vel pharetra. Dui id ornare arcu odio. Sed vulputate mi sit amet mauris commodo quis. Dignissim suspendisse in est ante. Venenatis lectus magna fringilla urna porttitor rhoncus dolor purus.\",\r\n\r\n          \"Lacus laoreet non curabitur gravida arcu ac tortor dignissim. Ut venenatis tellus in metus vulputate eu scelerisque felis. Enim blandit volutpat maecenas volutpat blandit aliquam. Porta lorem mollis aliquam ut porttitor leo a. Tortor vitae purus faucibus ornare suspendisse sed. Egestas fringilla phasellus faucibus scelerisque. Laoreet id donec ultrices tincidunt arcu non sodales neque sodales. A diam sollicitudin tempor id eu nisl nunc mi ipsum. Egestas sed tempus urna et pharetra pharetra massa massa ultricies. Feugiat in ante metus dictum. Ut morbi tincidunt augue interdum velit euismod in pellentesque massa. Urna nec tincidunt praesent semper feugiat nibh sed pulvinar proin. Diam quam nulla porttitor massa id. At volutpat diam ut venenatis tellus in metus vulputate eu. Dui ut ornare lectus sit amet est placerat in. Pulvinar elementum integer enim neque volutpat ac tincidunt vitae semper. Lectus urna duis convallis convallis tellus id interdum velit.\",\r\n\r\n          \"Lectus magna fringilla urna porttitor rhoncus dolor purus non. Pellentesque habitant morbi tristique senectus et netus et malesuada. Ac feugiat sed lectus vestibulum mattis ullamcorper velit. Nunc congue nisi vitae suscipit. Sed lectus vestibulum mattis ullamcorper velit sed. Neque laoreet suspendisse interdum consectetur libero. Egestas sed tempus urna et. Turpis tincidunt id aliquet risus feugiat in. Sed turpis tincidunt id aliquet risus feugiat. Ut morbi tincidunt augue interdum velit euismod in. Euismod in pellentesque massa placerat duis. Placerat orci nulla pellentesque dignissim enim sit amet. Id semper risus in hendrerit gravida rutrum quisque. Nunc scelerisque viverra mauris in aliquam sem fringilla ut morbi.\",\r\n        ];\r\n\r\n        // get first image in content (if any)\r\n        let coverImage = content.find((elem) => {\r\n          return /(http(s?):)/.test(elem);\r\n        });\r\n\r\n        // if no images in content, append a random default one to the start\r\n        if (!coverImage)\r\n          coverImage = defaultImages[\r\n            Math.floor(Math.random() * defaultImages.length)\r\n          ];\r\n        content.unshift(coverImage);\r\n\r\n          // create story in database\r\n          axios\r\n            .post(\r\n              `${config.API_URL}/story/create`,\r\n              { content},\r\n              { withCredentials: true }\r\n            )\r\n            .then(() => {\r\n              console.log(\"created post\");\r\n            })\r\n            .catch((err) => {\r\n              console.log(\"failed to create post\");\r\n              console.log(\"error: \", err);\r\n            })\r\n        };\r\n      \r\n    }\r\n  };\r\n}\r\n","// libraries\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Switch, Route } from \"react-router-dom\";\n// useful data\nimport config from \"./config\";\n// styles\nimport \"./App.css\";\n// components\nimport ViewStoriesPage from \"./components/pages/ViewStoriesPage\";\n\nclass App extends Component {\n  componentDidMount() {\n    if (!this.state.loggedInUser) {\n      this.getUser();\n    }\n  }\n\n  state = {\n    loggedinUser: {},\n  };\n\n  render() {\n    return (\n      <>\n        <Switch>\n          <Route\n            path=\"/\"\n            render={() => {\n              return (\n                <ViewStoriesPage\n                  loggedInUser={this.state.loggedInUser}\n                  updateUserData={this.updateUserData}\n                />\n              );\n            }}\n          />\n        </Switch>\n      </>\n    );\n  }\n\n  getUser = () => {\n    axios\n      .get(`${config.API_URL}/user`, { withCredentials: true })\n      .then((res) => {\n        this.setState({\n          loggedInUser: res.data,\n        });\n        console.log(\"obtained user data\");\n      })\n      .catch((err) => {\n        if (err.response.status === 401) {\n          console.log(\"failed to obtain user data\");\n        }\n      });\n  };\n\n  updateUserData = (data) => {\n    console.log('updating user data');\n    this.setState({\n      loggedInUser: data,\n    });\n  };\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {BrowserRouter} from 'react-router-dom'\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}